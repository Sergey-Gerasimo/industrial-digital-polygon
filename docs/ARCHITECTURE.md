## Архитектура проекта

Проект организован по слоям: `application`, `domain`, `infra`, `logic`, с явным разграничением ответственности.

### Слои

- `app/application` — точка входа API и настройка приложения.
  - `api/main.py`: фабрика `create_app()` создает FastAPI-приложение с Swagger по пути `/api/docs`.

- `app/domain` — предметная область: сущности и значения.
  - `entities/*`: сущности домена для модулей производства, закупок, коммерции, инжиниринга.
  - `values/*`: value-объекты (количество, стоимость, период и т. п.).
  - `exceptions/*`: базовые исключения домена.

- `app/infra` — инфраструктура и интеграции.
  - `config/settings.py`: централизованные настройки (API, Postgres, Redis, RabbitMQ, безопасность, логирование) на базе Pydantic Settings.
  - `database/*`: подключение к БД и модели (SQLAlchemy).
  - `redis/*`: подключения и репозитории Redis.
  - `rabbitmq/*`: подключения, репозитории и консьюмеры RabbitMQ.
  - `security/*`: JWT и безопасность.

- `app/logic` — бизнес-логика и сценарии использования (entrypoints для домена и интеграций).

### Потоки данных (высокоуровнево)

1. HTTP-запросы приходят в FastAPI (`application/api`), проксируются в слой `logic`.
2. Слой `logic` оркестрирует доменные операции с использованием сущностей из `domain` и сервисов из `infra`.
3. Данные хранятся и читаются через инфраструктурные адаптеры: PostgreSQL, Redis, очереди RabbitMQ.
4. Межмодульное взаимодействие предполагается через шину событий (RabbitMQ) и разделяемые value-объекты домена.

### Конфигурация

Все параметры загружаются из переменных окружения (см. `infra/config/settings.py`). Реализована проверка опасных значений по умолчанию с предупреждениями в лог.

Ключевые настройки:
- API: порт/хост, автоперезагрузка, CORS/allowed hosts
- PostgreSQL: DSN, размеры пула, SQL logging
- Redis: DSN, пул и таймауты
- RabbitMQ: DSN, очереди и timeouts
- Безопасность: секреты JWT и времена жизни токенов

### Точки расширения

- Добавление новых модулей домена: в `domain/entities/*` и `logic/` (варианты юзкейсов).
- Новые интеграции: в `infra/*` c настройками в `config/settings.py`.
- Новые эндпоинты: в `application/api/*` и связывание с `logic`.


